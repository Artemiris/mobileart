<?phpuse yii\helpers\Url;$url = \yii\helpers\Url::to('@web/img/map.jpg');if (!empty($regions)) {    $points = [];    foreach ($regions as $region) {        /** @var \common\models\Site $region */        $points[] = [            'id' => $region->id,            'title' => $region->name,            'x' => $region->x,            'y' => $region->y,        ];    }    $points = json_encode($points);    $baseUrl = Url::to(['region/view']);    $script = <<< JS            var points = $points;    var map = $('#wrap-map');    var baseUrl = '$baseUrl';    var imageUrl = '$url';        var img = document.querySelector('#wrap-map img')    function loaded(callback) {                  $.each(points, function(i, item) {            drawPoint(map, item.x, item.y, item.title, item.id);        });                callback();    }    if (img.complete) {        loaded(function() {            var image = new Image();            image.onload = function() {                map.css('max-width', image.width);                map.css('margin', 'auto');            }            image.src = imageUrl;        })    } else {        img.addEventListener('load', loaded)        img.addEventListener('error', function() {            console.log('error')        })    }            function drawPoint(map, x, y, title, id) {        if (map && x && y && id) {            map.append($('<a class="point" data-toggle="tooltip" data-placement="right" data-html="true" title="' + title + '" href="' + baseUrl + '/' + id + '" data-region="#region-' + id + '"></a>').css('left', map.width() * x).css('top', map.height() * y));            $('[data-toggle="tooltip"]').tooltip();                        return true;        }                   return false;    }        $(window).resize(function () {        $('.point').remove();        $.each(points, function(i, item) {            drawPoint(map, item.x, item.y, item.title, item.id);        });    });        $(".point").mouseover(function() {      $(this).css('z-index', 1);      $($(this).attr('data-region')).addClass('active');    });        $(".point").mouseout(function() {      $(this).css('z-index', 0);      $($(this).attr('data-region')).removeClass('active');    });        $(".region").mouseover(function() {        $("a[data-region='#" + $(this).attr('id') + "']").tooltip('show');    });        $(".region").mouseout(function() {        $("a[data-region='#" + $(this).attr('id') + "']").tooltip('hide');    });JS;    $this->registerJs($script, yii\web\View::POS_READY);}?></div><div class="relative hidden-xs">    <div id="wrap-map">        <img src="/img/map.jpg" alt="map" class="img-responsive" id="map">    </div></div><div class="container">